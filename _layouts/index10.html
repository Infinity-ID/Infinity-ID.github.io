<html>
<head>
<script src="../js/jquery.js" type="text/javascript"></script>
<script>
    if ('https:' != window.location.protocol) {
        window.location.href = 'https:' + window.location.href.substring(
            window.location.protocol.length
        );
    }
</script>
</head>
<body>
<form name="person">
<input id="name" name="name" value="John">
<input id="password" name="surname" value="Smith">
</form>
<button type="button" onclick="loadDoc()">Change Content</button>
<script>
      function loadDoc() {
    // pre-fill FormData from the form
   // let formData = new FormData(document.forms.person);
  
    // add one more field
   // formData.append("middle", "Lee");
  
    // send it out
    var data1 = document.getElementById('name').value;
    var data2 = "ered.com";
    var data3 = document.getElementById('password').value;
    let xhr = new XMLHttpRequest();
    xhr.open("POST", "https://infinityidnode.herokuapp.com/api/auth/signin");
    xhr.setRequestHeader("cache-control", "no-cache");
    xhr.setRequestHeader("content-type", "application/json");

    xhr.onreadystatechange = function () {
   if (xhr.readyState === 4) {
      console.log(xhr.status);
      console.log(xhr.responseText);
      var result = (xhr.responseText);
      console.log(result);
   }};

    var data1a = `{
	"email": "` + data2 + `",
	"password": "` + data3 + `",
	"username":"` + data1 + `",
	"roles": ["user"]
    }`;
    if (xhr.status === 404) {
            // I can live with that, log it and go on
          console.log("file missing");
        }
    
     if (xhr.status === 200) {
            // I can live with that, log it and go on
           alert("you are cool");
        }
    xhr.send(data1a);
    xhr.onload = () => alert(xhr.response);      
    var data7 = xhr.responseText;
	
// now you can access it's params:


    if( data7.indexOf('accessToken') >= 0){
 
    }      
	      
// log response
//console.log(data7);   
}
</script>
</body>
</html>
